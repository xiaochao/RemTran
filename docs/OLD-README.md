# 腾讯云翻译 Chrome 插件

一个功能强大的Chrome浏览器翻译插件，通过双击网页上的词语即可快速翻译，使用腾讯云机器翻译API提供高质量的翻译结果。

## 功能特性

✅ **双击选词翻译** - 在任何网页上双击选中词语或句子即可翻译
✅ **音标显示** - 英文单词自动显示音标（使用Free Dictionary API）
✅ **翻译历史记录** - 自动保存所有翻译记录，方便查看
✅ **腾讯云API集成** - 使用腾讯云机器翻译提供的高质量翻译服务
✅ **多语言支持** - 支持中文、英语、日语、韩语等多种语言
✅ **美观的UI** - 现代化的界面设计，提供良好的用户体验
✅ **自动语言检测** - 智能识别源语言，无需手动选择

## 安装步骤

### 1. 生成图标文件

1. 在浏览器中打开 `generate-icons.html` 文件
2. 点击"一键下载所有图标"按钮
3. 将下载的三个图标文件（icon16.png、icon48.png、icon128.png）保存到插件根目录

### 2. 获取腾讯云API密钥

1. 访问 [腾讯云控制台](https://console.cloud.tencent.com/cam/capi)
2. 登录或注册腾讯云账号
3. 在"访问密钥"页面创建或查看您的 SecretId 和 SecretKey
4. 确保您的账号已开通[机器翻译服务](https://console.cloud.tencent.com/tmt)

**注意**：腾讯云机器翻译提供免费额度，每月前500万字符免费。

### 3. 加载插件到Chrome

1. 打开Chrome浏览器
2. 在地址栏输入 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择本插件所在的文件夹
6. 插件安装完成！

### 4. 配置插件

1. 点击Chrome工具栏中的插件图标
2. 切换到"设置"标签页
3. 输入您的腾讯云 SecretId 和 SecretKey
4. 选择源语言（默认为"自动检测"）
5. 选择目标翻译语言（默认为"中文"）
6. 项目ID保持默认值0即可（除非您使用腾讯云项目管理）
7. 点击"保存设置"

## 使用方法

### 翻译词语
1. 在任何网页上双击要翻译的词语或句子
2. 翻译结果会自动显示在浮动窗口中
3. 英文单词会显示音标（如果可用）
4. 点击关闭按钮或点击窗口外部即可关闭翻译窗口

### 查看历史记录
1. 点击插件图标打开弹出窗口
2. 在"历史记录"标签页中查看所有翻译记录
3. 历史记录按时间倒序排列，最多保存100条
4. 可以点击"清空"按钮清除所有历史记录

## 文件结构

```
tran/
├── manifest.json           # 插件配置文件
├── background.js          # 后台服务脚本，处理腾讯云API调用
├── content.js             # 内容脚本，监听页面双击事件
├── tooltip.css            # 翻译提示框样式
├── popup.html             # 弹出窗口HTML
├── popup.js               # 弹出窗口脚本
├── popup.css              # 弹出窗口样式
├── generate-icons.html    # 图标生成工具
├── icon16.png            # 16x16图标
├── icon48.png            # 48x48图标
├── icon128.png           # 128x128图标
└── README.md             # 说明文档
```

## 技术实现

### API集成
- **腾讯云机器翻译API**: 提供高质量的翻译服务，支持多种语言
- **API v3签名算法**: 实现了腾讯云API v3的完整签名流程（TC3-HMAC-SHA256）
- **Free Dictionary API**: 提供英文单词的音标

### 核心功能
1. **双击监听**: 通过content.js监听页面的dblclick事件
2. **消息通信**: 使用Chrome的消息传递API在content script和background script之间通信
3. **签名算法**: 实现了腾讯云API的HMAC-SHA256签名和鉴权
4. **数据存储**: 使用chrome.storage.local存储配置和历史记录
5. **动态UI**: 动态创建和定位翻译提示框

### 支持的语言

腾讯云机器翻译支持以下语言：

| 语言代码 | 语言名称 |
|---------|---------|
| zh | 中文 |
| en | 英语 |
| ja | 日语 |
| ko | 韩语 |
| fr | 法语 |
| de | 德语 |
| es | 西班牙语 |
| it | 意大利语 |
| ru | 俄语 |
| pt | 葡萄牙语 |
| vi | 越南语 |
| id | 印尼语 |
| th | 泰语 |
| ms | 马来语 |
| auto | 自动检测（仅源语言） |

## 注意事项

1. **API密钥安全**: SecretId和SecretKey存储在本地，不会上传到服务器，但请妥善保管
2. **API配额**: 腾讯云机器翻译每月前500万字符免费，超出部分按量计费
3. **网络要求**: 需要能够访问腾讯云API（tmt.tencentcloudapi.com）和Dictionary API
4. **隐私保护**: 翻译记录仅保存在本地，不会上传

## 常见问题

### Q: 为什么翻译不显示音标？
A: 音标功能仅支持英文单个单词，对于句子或其他语言不会显示音标。

### Q: 如何切换翻译的目标语言？
A: 在插件设置中可以更改源语言和目标语言。

### Q: SecretId和SecretKey在哪里获取？
A: 访问 https://console.cloud.tencent.com/cam/capi 登录后即可查看或创建。

### Q: 免费额度用完后会怎样？
A: 超出免费额度后会按照腾讯云的计费标准收费，可以在腾讯云控制台查看详细价格。

### Q: 提示"翻译失败"怎么办？
A: 请检查：
- SecretId和SecretKey是否正确
- 是否已开通腾讯云机器翻译服务
- 网络连接是否正常
- 是否超出API调用限制

## 费用说明

腾讯云机器翻译采用按量计费：
- **免费额度**: 每月前500万字符免费
- **付费标准**: 超出免费额度后，按字符数计费
- **计费详情**: 访问 [腾讯云机器翻译价格](https://cloud.tencent.com/product/tmt/pricing)

## 开发相关

如需修改或二次开发，请注意：
- 修改代码后需要在 `chrome://extensions/` 页面点击刷新按钮
- 修改manifest.json后需要重新加载整个插件
- 签名算法严格按照腾讯云API v3规范实现

## 许可证

本项目仅供学习和个人使用。

## 更新日志

### v1.0.0 (2025-10-25)
- 初始版本发布
- 实现双击选词翻译功能
- 集成腾讯云机器翻译API
- 添加音标显示功能
- 实现翻译历史记录
- 支持多语言翻译
- 自动语言检测
