# ç¿»è¯‘åŠ©æ‰‹ - Supabase ç‰ˆæœ¬

ä¸€ä¸ªé›†æˆäº† Supabase åç«¯æœåŠ¡çš„ç°ä»£åŒ–ç¿»è¯‘åº”ç”¨ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” ç”¨æˆ·è®¤è¯
- âœ… é‚®ç®±å¯†ç ç™»å½•
- âœ… é‚®ç®±éªŒè¯ç ç™»å½•
- âœ… æ‰‹æœºå·éªŒè¯ç ç™»å½•ï¼ˆéœ€é…ç½®ï¼‰
- âœ… Google OAuth ç™»å½•ï¼ˆéœ€é…ç½®ï¼‰
- âœ… è®°ä½æˆ‘åŠŸèƒ½
- âœ… å¯†ç æ˜¾ç¤º/éšè—

### ğŸ’¬ ç¿»è¯‘åŠŸèƒ½
- âœ… å¤šè¯­è¨€æ”¯æŒï¼ˆ8ç§è¯­è¨€ï¼‰
- âœ… å®æ—¶å­—ç¬¦è®¡æ•°ï¼ˆæœ€å¤š5000å­—ï¼‰
- âœ… ç¿»è¯‘ç»“æœå¤åˆ¶
- âœ… è¯­éŸ³æœ—è¯»
- âœ… å¿«æ·é”®æ”¯æŒï¼ˆCtrl/Cmd + Enterï¼‰

### ğŸ“š ç¿»è¯‘å†å²
- âœ… äº‘ç«¯å­˜å‚¨
- âœ… å¤šè®¾å¤‡åŒæ­¥
- âœ… å†å²è®°å½•æŸ¥çœ‹
- âœ… ç‚¹å‡»åŠ è½½å†å²ç¿»è¯‘

### âš™ï¸ ç”¨æˆ·è®¾ç½®
- âœ… æŸ¥çœ‹å½“å‰è´¦å·
- âœ… é€€å‡ºç™»å½•
- âœ… è‡ªåŠ¨æ£€æµ‹è¯­è¨€
- âœ… ä¿å­˜å†å²å¼€å…³

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: è®¾ç½®æ•°æ®åº“

1. è®¿é—® Supabase Dashboard: https://your-project.supabase.co ï¼ˆæ›¿æ¢ä¸ºä½ çš„é¡¹ç›® URLï¼‰
2. è¿›å…¥ **SQL Editor** â†’ **+ New query**
3. å¤åˆ¶ `database-schema.sql` çš„å…¨éƒ¨å†…å®¹
4. ç²˜è´´å¹¶æ‰§è¡Œ

### æ­¥éª¤ 2: åˆ›å»ºæµ‹è¯•è´¦å·

**åœ¨ Supabase Dashboard ä¸­ï¼š**
1. è¿›å…¥ **Authentication** â†’ **Users**
2. ç‚¹å‡» **Add user** â†’ **Create new user**
3. è¾“å…¥ï¼š
   - Email: `test@example.com`
   - Password: `Test123456!`
4. å‹¾é€‰ **Auto Confirm User**
5. ç‚¹å‡» **Create user**

### æ­¥éª¤ 3: æµ‹è¯•åº”ç”¨

1. æ‰“å¼€ `index.html`
2. ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•
3. å¼€å§‹ç¿»è¯‘ï¼

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [QUICK_START.md](./QUICK_START.md)

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
tran/
â”œâ”€â”€ ğŸ“„ HTML é¡µé¢
â”‚   â”œâ”€â”€ index.html                # ç™»å½•é¡µé¢
â”‚   â””â”€â”€ translator.html           # ç¿»è¯‘å™¨ä¸»é¡µé¢
â”‚
â”œâ”€â”€ ğŸ¨ æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ styles.css                # ç™»å½•é¡µé¢æ ·å¼
â”‚   â””â”€â”€ translator.css            # ç¿»è¯‘å™¨æ ·å¼
â”‚
â”œâ”€â”€ âš¡ Supabase é›†æˆ
â”‚   â”œâ”€â”€ supabase-config.js        # Supabase é…ç½®
â”‚   â”œâ”€â”€ auth-service.js           # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ database-service.js       # æ•°æ®åº“æœåŠ¡
â”‚   â”œâ”€â”€ script-supabase.js       # ç™»å½•é€»è¾‘
â”‚   â””â”€â”€ translator-supabase.js   # ç¿»è¯‘å™¨é€»è¾‘
â”‚
â”œâ”€â”€ ğŸ’¾ æœ¬åœ°ç‰ˆæœ¬ï¼ˆä¸ä½¿ç”¨ Supabaseï¼‰
â”‚   â”œâ”€â”€ script.js                 # æœ¬åœ°ç™»å½•é€»è¾‘
â”‚   â””â”€â”€ translator.js             # æœ¬åœ°ç¿»è¯‘å™¨é€»è¾‘
â”‚
â”œâ”€â”€ ğŸ—„ï¸ æ•°æ®åº“
â”‚   â””â”€â”€ database-schema.sql       # å»ºè¡¨è„šæœ¬
â”‚
â””â”€â”€ ğŸ“– æ–‡æ¡£
    â”œâ”€â”€ QUICK_START.md            # å¿«é€Ÿå¼€å§‹æŒ‡å— â­
    â”œâ”€â”€ SUPABASE_SETUP.md         # Supabase è¯¦ç»†è¯´æ˜
    â”œâ”€â”€ TEST_ACCOUNTS.md          # æµ‹è¯•è´¦å·è¯´æ˜
    â””â”€â”€ README-SUPABASE.md        # æœ¬æ–‡ä»¶
```

---

## ğŸ”§ é…ç½®ä¿¡æ¯

### Supabase é…ç½®

è¯·åœ¨ `config.js` ä¸­é…ç½®ä½ çš„ Supabase ä¿¡æ¯ï¼š

```javascript
const CONFIG = {
    supabase: {
        url: 'https://your-project.supabase.co',  // æ›¿æ¢ä¸ºä½ çš„é¡¹ç›® URL
        anonKey: 'your-anon-key-here',             // æ›¿æ¢ä¸ºä½ çš„ anon key
        projectId: 'your-project-id'                // æ›¿æ¢ä¸ºä½ çš„é¡¹ç›® ID
    }
};
```

å‚è€ƒ `config.example.js` æ–‡ä»¶è·å–é…ç½®æ¨¡æ¿ã€‚

---

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„

### user_profilesï¼ˆç”¨æˆ·èµ„æ–™ï¼‰
- `id` - ç”¨æˆ· IDï¼ˆå…³è” auth.usersï¼‰
- `email` - é‚®ç®±
- `phone` - æ‰‹æœºå·
- `wechat_id` - å¾®ä¿¡å·
- `display_name` - æ˜¾ç¤ºåç§°
- `avatar_url` - å¤´åƒ URL

### translation_historyï¼ˆç¿»è¯‘å†å²ï¼‰
- `id` - è®°å½• ID
- `user_id` - ç”¨æˆ· ID
- `source_text` - æºæ–‡æœ¬
- `translated_text` - ç¿»è¯‘ç»“æœ
- `source_language` - æºè¯­è¨€
- `target_language` - ç›®æ ‡è¯­è¨€
- `created_at` - åˆ›å»ºæ—¶é—´

### user_settingsï¼ˆç”¨æˆ·è®¾ç½®ï¼‰
- `id` - è®¾ç½® ID
- `user_id` - ç”¨æˆ· ID
- `auto_detect_language` - è‡ªåŠ¨æ£€æµ‹è¯­è¨€
- `save_history` - ä¿å­˜å†å²
- `default_source_lang` - é»˜è®¤æºè¯­è¨€
- `default_target_lang` - é»˜è®¤ç›®æ ‡è¯­è¨€

---

## ğŸ”’ å®‰å…¨ç‰¹æ€§

### Row Level Security (RLS)
- âœ… å·²å¯ç”¨ RLS ç­–ç•¥
- âœ… ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
- âœ… é˜²æ­¢æ•°æ®æ³„éœ²

### API å¯†é’¥å®‰å…¨
- âœ… ä½¿ç”¨ anon public key
- âœ… é€šè¿‡ RLS éªŒè¯æƒé™
- âœ… service_role key ä¿å¯†

---

## ğŸ¯ ä½¿ç”¨è¯´æ˜

### ç™»å½•
1. é‚®ç®±/æ‰‹æœº/å¾®ä¿¡ä¸‰ç§ç™»å½•æ–¹å¼
2. å¯†ç ç™»å½•æˆ–éªŒè¯ç ç™»å½•
3. æ”¯æŒ"è®°ä½æˆ‘"

### ç¿»è¯‘
1. é€‰æ‹©æºè¯­è¨€
2. è¾“å…¥æ–‡æœ¬ï¼ˆæœ€å¤š5000å­—ï¼‰
3. ç‚¹å‡»"ç¿»è¯‘"æŒ‰é’®
4. æŸ¥çœ‹ç»“æœå¹¶å¤åˆ¶æˆ–æœ—è¯»

### å†å²è®°å½•
1. ç‚¹å‡»é¡¶éƒ¨"å†å²"æ ‡ç­¾
2. æŸ¥çœ‹æ‰€æœ‰ç¿»è¯‘è®°å½•
3. ç‚¹å‡»è®°å½•å¿«é€ŸåŠ è½½

### è®¾ç½®
1. æŸ¥çœ‹å½“å‰ç™»å½•è´¦å·
2. ä¿®æ”¹ç”¨æˆ·è®¾ç½®
3. é€€å‡ºç™»å½•

---

## ğŸ“± æµè§ˆå™¨æ”¯æŒ

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

---

## ğŸ› ï¸ å¼€å‘è¯´æ˜

### åˆ‡æ¢æœ¬åœ°æ¨¡å¼

å¦‚æœæƒ³ä½¿ç”¨ä¸éœ€è¦ Supabase çš„æœ¬åœ°æ¨¡å¼ï¼š

ä¿®æ”¹ `index.html` å’Œ `translator.html`ï¼š
```html
<!-- å°† -->
<script src="script-supabase.js"></script>
<!-- æ”¹ä¸º -->
<script src="script.js"></script>
```

æœ¬åœ°æ¨¡å¼ä½¿ç”¨æµ‹è¯•è´¦å·ï¼š
- é‚®ç®±ï¼štest@translator.com
- å¯†ç ï¼š123456

### æ¥å…¥çœŸå®ç¿»è¯‘ API

ä¿®æ”¹ `translator-supabase.js` ä¸­çš„ `simulateTranslation` å‡½æ•°ï¼š

```javascript
async function translateText(text, from, to) {
    const response = await fetch('YOUR_TRANSLATION_API', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer YOUR_API_KEY'
        },
        body: JSON.stringify({
            text: text,
            source_lang: from,
            target_lang: to
        })
    });

    const data = await response.json();
    return data.translated_text;
}
```

æ¨èçš„ç¿»è¯‘ APIï¼š
- **Google Cloud Translation API**
- **DeepL API**
- **ç™¾åº¦ç¿»è¯‘ API**
- **æœ‰é“ç¿»è¯‘ API**

---

## ğŸ“Š æ•°æ®æµç¨‹

### ç™»å½•æµç¨‹
```
ç”¨æˆ·è¾“å…¥è´¦å·å¯†ç 
    â†“
AuthService.signInWithEmail()
    â†“
Supabase Auth éªŒè¯
    â†“
è¿”å› Session Token
    â†“
è·³è½¬åˆ°ç¿»è¯‘å™¨é¡µé¢
```

### ç¿»è¯‘æµç¨‹
```
ç”¨æˆ·è¾“å…¥æ–‡æœ¬å¹¶ç‚¹å‡»ç¿»è¯‘
    â†“
è°ƒç”¨ç¿»è¯‘ APIï¼ˆå½“å‰ä¸ºæ¨¡æ‹Ÿï¼‰
    â†“
æ˜¾ç¤ºç¿»è¯‘ç»“æœ
    â†“
DatabaseService.saveTranslation()
    â†“
ä¿å­˜åˆ° Supabase æ•°æ®åº“
```

### å†å²è®°å½•æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»"å†å²"æ ‡ç­¾
    â†“
DatabaseService.getTranslationHistory()
    â†“
ä» Supabase åŠ è½½æ•°æ®
    â†“
æ¸²æŸ“å†å²åˆ—è¡¨
```

---

## ğŸš§ å·²çŸ¥é™åˆ¶

1. **ç¿»è¯‘åŠŸèƒ½**ï¼šç›®å‰ä½¿ç”¨æ¨¡æ‹Ÿç¿»è¯‘ï¼Œéœ€è¦æ¥å…¥çœŸå® API
2. **æ‰‹æœºå·ç™»å½•**ï¼šéœ€è¦é…ç½® Supabase çŸ­ä¿¡æœåŠ¡
3. **å¾®ä¿¡ç™»å½•**ï¼šéœ€è¦å¾®ä¿¡ä¼ä¸šè´¦å·
4. **é‚®ä»¶æœåŠ¡**ï¼šé»˜è®¤ä½¿ç”¨ Supabase å†…ç½®é‚®ä»¶ï¼ˆæœ‰é™é¢ï¼‰

---

## ğŸ“ˆ æœªæ¥è®¡åˆ’

- [ ] æ¥å…¥çœŸå®ç¿»è¯‘ API
- [ ] æ”¯æŒæ–‡ä»¶ç¿»è¯‘
- [ ] æ·»åŠ ç¿»è¯‘å†å²æœç´¢
- [ ] æ·»åŠ æ”¶è—å¤¹åŠŸèƒ½
- [ ] æ”¯æŒç¦»çº¿æ¨¡å¼
- [ ] å¯¼å‡ºç¿»è¯‘å†å²
- [ ] å¤šè¯­è¨€ç•Œé¢
- [ ] ç§»åŠ¨ç«¯ä¼˜åŒ–

---

## ğŸ“„ æ–‡æ¡£ç´¢å¼•

- ğŸ“˜ [å¿«é€Ÿå¼€å§‹æŒ‡å—](./QUICK_START.md) - **æ–°æ‰‹å¿…è¯»**
- ğŸ“— [Supabase è®¾ç½®æŒ‡å—](./SUPABASE_SETUP.md) - è¯¦ç»†é…ç½®è¯´æ˜
- ğŸ“™ [æµ‹è¯•è´¦å·è¯´æ˜](./TEST_ACCOUNTS.md) - æœ¬åœ°æµ‹è¯•è´¦å·
- ğŸ“• [æ•°æ®åº“æ¶æ„](./database-schema.sql) - SQL å»ºè¡¨è„šæœ¬

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•å¼€å§‹ä½¿ç”¨ï¼Ÿ
A: æŸ¥çœ‹ [QUICK_START.md](./QUICK_START.md)

### Q: ç™»å½•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A:
1. ç¡®è®¤æ˜¯å¦æ‰§è¡Œäº†æ•°æ®åº“è„šæœ¬
2. ç¡®è®¤è´¦å·å·²åœ¨ Supabase åˆ›å»º
3. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯

### Q: å¦‚ä½•é‡ç½®å¯†ç ï¼Ÿ
A: åœ¨ Supabase Dashboard â†’ Authentication â†’ Users ä¸­é‡ç½®

### Q: å†å²è®°å½•ä¸æ˜¾ç¤ºï¼Ÿ
A:
1. ç¡®è®¤å·²ç™»å½•
2. ç¡®è®¤å·²ç¿»è¯‘è¿‡å†…å®¹
3. æ£€æŸ¥ Supabase Table Editor

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹æ–‡æ¡£ï¼š[QUICK_START.md](./QUICK_START.md)
2. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12ï¼‰
3. æŸ¥çœ‹ Supabase Dashboard æ—¥å¿—
4. æ£€æŸ¥æ•°æ®åº“è¡¨æ˜¯å¦åˆ›å»ºæˆåŠŸ

---

## ğŸ“œ è®¸å¯è¯

MIT License

---

## ğŸ™ è‡´è°¢

- [Supabase](https://supabase.com) - åç«¯æœåŠ¡
- [Figma](https://figma.com) - è®¾è®¡å·¥å…·

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼

---

**æœ€åæ›´æ–°**: 2025-11-01
**ç‰ˆæœ¬**: v2.0.0 (Supabase)
