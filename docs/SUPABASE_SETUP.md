# Supabase é›†æˆæŒ‡å—

## ğŸ‰ æ­å–œï¼Supabase å·²é›†æˆå®Œæˆ

æ‚¨çš„ç¿»è¯‘åŠ©æ‰‹ç°å·²é›†æˆ Supabase åç«¯æœåŠ¡ï¼Œæ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š
- âœ… ç”¨æˆ·è®¤è¯ï¼ˆé‚®ç®±/æ‰‹æœºå·ç™»å½•ï¼‰
- âœ… ç¿»è¯‘å†å²äº‘ç«¯å­˜å‚¨
- âœ… å¤šè®¾å¤‡æ•°æ®åŒæ­¥
- âœ… ç”¨æˆ·è®¾ç½®ä¿å­˜

---

## ğŸ“‹ ä¸‹ä¸€æ­¥ï¼šè®¾ç½® Supabase æ•°æ®åº“

### æ­¥éª¤ 1: æ‰§è¡Œæ•°æ®åº“è„šæœ¬

1. ç™»å½• Supabase Dashboard: https://your-project.supabase.co ï¼ˆæ›¿æ¢ä¸ºä½ çš„é¡¹ç›® URLï¼‰
2. ç‚¹å‡»å·¦ä¾§èœå•çš„ **SQL Editor**
3. ç‚¹å‡» **+ New query** åˆ›å»ºæ–°æŸ¥è¯¢
4. å¤åˆ¶ `database-schema.sql` æ–‡ä»¶çš„å…¨éƒ¨å†…å®¹
5. ç²˜è´´åˆ° SQL ç¼–è¾‘å™¨ä¸­
6. ç‚¹å‡» **Run** æ‰§è¡Œè„šæœ¬

æ‰§è¡Œåå°†åˆ›å»ºä»¥ä¸‹è¡¨ï¼š
- `user_profiles` - ç”¨æˆ·æ‰©å±•ä¿¡æ¯
- `translation_history` - ç¿»è¯‘å†å²è®°å½•
- `user_settings` - ç”¨æˆ·è®¾ç½®

---

### æ­¥éª¤ 2: é…ç½®é‚®ç®±è®¤è¯

1. åœ¨ Supabase Dashboard ä¸­ï¼Œè¿›å…¥ **Authentication** â†’ **Providers**
2. æ‰¾åˆ° **Email** é€‰é¡¹
3. ç¡®ä¿å·²å¯ç”¨ (Enable Email provider)
4. é…ç½®é‚®ä»¶æ¨¡æ¿ï¼ˆå¯é€‰ï¼‰

---

### æ­¥éª¤ 3: æ³¨å†Œæµ‹è¯•è´¦å·

ç”±äºç°åœ¨ä½¿ç”¨çœŸå®çš„ Supabase è®¤è¯ï¼Œæ‚¨éœ€è¦æ³¨å†ŒçœŸå®è´¦å·ï¼š

#### æ–¹æ³• 1: ä½¿ç”¨ç™»å½•é¡µé¢æ³¨å†Œ
1. æ‰“å¼€ `index.html`
2. ç‚¹å‡»åº•éƒ¨çš„"ç«‹å³æ³¨å†Œ"é“¾æ¥
3. è¾“å…¥é‚®ç®±å’Œå¯†ç 
4. æŸ¥æ”¶éªŒè¯é‚®ä»¶å¹¶éªŒè¯

#### æ–¹æ³• 2: æ‰‹åŠ¨åœ¨ Supabase åˆ›å»ºç”¨æˆ·
1. è¿›å…¥ **Authentication** â†’ **Users**
2. ç‚¹å‡» **Add user** â†’ **Create new user**
3. è¾“å…¥é‚®ç®±å’Œå¯†ç 
4. ç‚¹å‡» **Create user**

---

## ğŸš€ æ–‡ä»¶ç»“æ„

### æ–°å¢æ–‡ä»¶ï¼š

```
tran/
â”œâ”€â”€ supabase-config.js           # Supabase é…ç½®
â”œâ”€â”€ auth-service.js              # è®¤è¯æœåŠ¡
â”œâ”€â”€ database-service.js          # æ•°æ®åº“æœåŠ¡
â”œâ”€â”€ script-supabase.js          # ä½¿ç”¨ Supabase çš„ç™»å½•è„šæœ¬
â”œâ”€â”€ translator-supabase.js      # ä½¿ç”¨ Supabase çš„ç¿»è¯‘å™¨è„šæœ¬
â””â”€â”€ database-schema.sql          # æ•°æ®åº“å»ºè¡¨è„šæœ¬
```

### è¦ä½¿ç”¨ Supabase ç‰ˆæœ¬ï¼š

**é€‰é¡¹ A: æ‰‹åŠ¨åˆ‡æ¢è„šæœ¬**

ä¿®æ”¹ `index.html` å’Œ `translator.html`ï¼Œå°†ï¼š
```html
<script src="script.js"></script>
```
æ”¹ä¸ºï¼š
```html
<script src="script-supabase.js"></script>
```

å°†ï¼š
```html
<script src="translator.js"></script>
```
æ”¹ä¸ºï¼š
```html
<script src="translator-supabase.js"></script>
```

**é€‰é¡¹ B: é‡å‘½åæ–‡ä»¶**

```bash
# å¤‡ä»½åŸæ–‡ä»¶
ren script.js script-local.js
ren translator.js translator-local.js

# ä½¿ç”¨ Supabase ç‰ˆæœ¬
ren script-supabase.js script.js
ren translator-supabase.js translator.js
```

---

## ğŸ” è®¤è¯åŠŸèƒ½

### æ”¯æŒçš„ç™»å½•æ–¹å¼ï¼š

#### 1. é‚®ç®±å¯†ç ç™»å½•
- ç”¨æˆ·ä½¿ç”¨é‚®ç®±å’Œå¯†ç ç™»å½•
- éœ€è¦å…ˆæ³¨å†Œè´¦å·

#### 2. é‚®ç®±éªŒè¯ç ç™»å½•
- ç”¨æˆ·è¾“å…¥é‚®ç®±
- ç‚¹å‡»"å‘é€éªŒè¯ç "
- è¾“å…¥æ”¶åˆ°çš„éªŒè¯ç ç™»å½•

#### 3. æ‰‹æœºå·éªŒè¯ç ç™»å½•ï¼ˆéœ€é…ç½®ï¼‰
- éœ€è¦åœ¨ Supabase é…ç½®çŸ­ä¿¡æœåŠ¡
- æ”¯æŒ Twilioã€MessageBird ç­‰

#### 4. Google OAuth ç™»å½•
- éœ€è¦åœ¨ Supabase é…ç½® Google OAuth

---

## ğŸ’¾ æ•°æ®å­˜å‚¨

### ç¿»è¯‘å†å²
- è‡ªåŠ¨ä¿å­˜åˆ°äº‘ç«¯
- æ”¯æŒå¤šè®¾å¤‡åŒæ­¥
- æœ€å¤šä¿å­˜ 50 æ¡ï¼ˆå¯è°ƒæ•´ï¼‰

### ç”¨æˆ·è®¾ç½®
- è‡ªåŠ¨æ£€æµ‹è¯­è¨€
- ä¿å­˜ç¿»è¯‘å†å²å¼€å…³
- é»˜è®¤æºè¯­è¨€/ç›®æ ‡è¯­è¨€

---

## ğŸ”’ å®‰å…¨æ€§

### Row Level Security (RLS)
- å·²å¯ç”¨ RLS ç­–ç•¥
- ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
- è‡ªåŠ¨é˜²æ­¢æ•°æ®æ³„éœ²

### API å¯†é’¥
- ä½¿ç”¨ `anon key`ï¼ˆå…¬å¼€å¯†é’¥ï¼‰
- æ‰€æœ‰è¯·æ±‚é€šè¿‡ RLS éªŒè¯
- ä¸æš´éœ² `service_role` å¯†é’¥

---

## ğŸ› ï¸ å¼€å‘è¯´æ˜

### æµ‹è¯•æœ¬åœ°ç‰ˆæœ¬
å¦‚æœæƒ³æµ‹è¯•ä¸ä½¿ç”¨ Supabase çš„æœ¬åœ°ç‰ˆæœ¬ï¼š
- ä½¿ç”¨ `script.js` å’Œ `translator.js`
- æµ‹è¯•è´¦å·ï¼š
  - é‚®ç®±ï¼štest@translator.com
  - å¯†ç ï¼š123456

### æµ‹è¯• Supabase ç‰ˆæœ¬
- ä½¿ç”¨ `script-supabase.js` å’Œ `translator-supabase.js`
- éœ€è¦å…ˆåœ¨ Supabase æ³¨å†ŒçœŸå®è´¦å·

---

## â“ å¸¸è§é—®é¢˜

### Q: ç™»å½•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ï¼š
1. æ˜¯å¦æ‰§è¡Œäº†æ•°æ®åº“è„šæœ¬
2. é‚®ç®±æ˜¯å¦å·²æ³¨å†Œ
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

### Q: å¦‚ä½•é‡ç½®å¯†ç ï¼Ÿ
A:
1. åœ¨ç™»å½•é¡µé¢ç‚¹å‡»"å¿˜è®°å¯†ç "
2. æˆ–åœ¨ Supabase Dashboard â†’ Authentication â†’ Users ä¸­æ‰‹åŠ¨é‡ç½®

### Q: ç¿»è¯‘å†å²æ²¡æœ‰ä¿å­˜ï¼Ÿ
A: æ£€æŸ¥ï¼š
1. æ˜¯å¦å·²ç™»å½•
2. æ•°æ®åº“è¡¨æ˜¯å¦åˆ›å»ºæˆåŠŸ
3. RLS ç­–ç•¥æ˜¯å¦æ­£ç¡®

### Q: å¦‚ä½•æ¸…ç©ºç¿»è¯‘å†å²ï¼Ÿ
A:
1. è¿›å…¥ Supabase Dashboard
2. æ‰“å¼€ SQL Editor
3. æ‰§è¡Œ: `DELETE FROM translation_history WHERE user_id = 'your_user_id';`

---

## ğŸ“ æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ
1. æŸ¥çœ‹æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. æ£€æŸ¥ Supabase Dashboard çš„ Logs
3. æŸ¥çœ‹ `database-schema.sql` ç¡®è®¤è¡¨ç»“æ„

---

## ğŸ¯ ä¸‹ä¸€æ­¥ä¼˜åŒ–å»ºè®®

1. **æ¥å…¥çœŸå®ç¿»è¯‘ API**
   - Google Translate API
   - DeepL API
   - ç™¾åº¦ç¿»è¯‘ API

2. **æ·»åŠ æ›´å¤šç™»å½•æ–¹å¼**
   - GitHub OAuth
   - Facebook Login
   - å¾®ä¿¡ç™»å½•ï¼ˆéœ€ä¼ä¸šè´¦å·ï¼‰

3. **å¢å¼ºåŠŸèƒ½**
   - ç¿»è¯‘å†å²æœç´¢
   - æ”¶è—å¤¹åŠŸèƒ½
   - å¯¼å‡ºç¿»è¯‘å†å²

4. **æ€§èƒ½ä¼˜åŒ–**
   - ç¿»è¯‘ç»“æœç¼“å­˜
   - åˆ†é¡µåŠ è½½å†å²
   - ç¦»çº¿æ¨¡å¼

---

## âœ… å®Œæˆæ¸…å•

- [x] Supabase é…ç½®
- [x] æ•°æ®åº“è¡¨è®¾è®¡
- [x] è®¤è¯æœåŠ¡é›†æˆ
- [x] æ•°æ®åº“æœåŠ¡é›†æˆ
- [x] ç™»å½•é¡µé¢é›†æˆ
- [x] ç¿»è¯‘å™¨é¡µé¢é›†æˆ
- [ ] æ‰§è¡Œæ•°æ®åº“è„šæœ¬
- [ ] æ³¨å†Œæµ‹è¯•è´¦å·
- [ ] æµ‹è¯•ç™»å½•åŠŸèƒ½
- [ ] æµ‹è¯•ç¿»è¯‘åŠŸèƒ½
- [ ] æµ‹è¯•å†å²è®°å½•åŠŸèƒ½

---

ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
